<script type="module" src="https://code4fukui.github.io/csv-map/csv-map.js"></script>
<csv-map id=csvmap height="80vh"></csv-map>
<select id=seldata></select>

<script type="module">
import { CSV } from "https://js.sabae.cc/CSV.js";

const list = await CSV.fetchJSON("./opendata-list.csv");
for (const item of list) {
  const opt = document.createElement("option");
  opt.textContent = item.name;
  opt.value = item.url;
  seldata.appendChild(opt);
}
seldata.oninput = async () => {
  const url = seldata.value;
  const fn = url.substring(url.lastIndexOf("/") + 1);
  console.log(fn);
  const data = await CSV.fetchJSON("data/" + fn);
  console.log(data);
  csvmap.value = data;
};

</script>
